version: '3.8'
services:
  redis-docker:
    image: redis
    ports:
      - 6379:6379

  spy-docker:
    image: ghcr.io/wormhole-foundation/guardiand:latest
    entrypoint: /guardiand spy --nodeKey /node.key --spyRPC "[::]:7073" --network /wormhole/testnet/2/1 --bootstrap /dns4/wormhole-testnet-v2-bootstrap.certus.one/udp/8999/quic/p2p/12D3KooWAkB9ynDur1Jtoa97LBUp8RXdhzS5uHgAfdTquJbrbN7i
    ports:
      - 7073:7073
    platform: linux/amd64

  human-relayer-app:
    build:
      context: .
      dockerfile: Dockerfile.human-relayer-app
    ports:
      - 8080:8080
    depends_on:
      - spy-docker
      - redis-docker
    env_file:
      - human-relayer-app/.env
